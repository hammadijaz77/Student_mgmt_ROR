var r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e={};
/**
 * JSON + Object references wrapper
 *
 * @author Hunter Loftis <hunter@skookum.com>
 * @license The MIT license.
 * @copyright Copyright (c) 2010 Skookum, skookum.com
 */(function(){var n="object array date function".split(" ");var t="_CRYO_REF_";var i="_CRYO_INFINITY_";var a="_CRYO_FUNCTION_";var f="_CRYO_UNDEFINED_";var u="_CRYO_DATE_";var s="_CRYO_OBJECT_";var o="_CRYO_ARRAY_";function typeOf(r){return"object"===typeof r?null===r?"null":r&&1===r.nodeType?"dom":r instanceof Array?"array":r instanceof Date?"date":"object":typeof r}function defaults(r){var e=arguments.length;if(e<2||null==r)return r;for(var n=1;n<e;n++){var t=arguments[n],i=Object.keys(t),a=i.length;for(var f=0;f<a;f++){var u=i[f];void 0===r[u]&&(r[u]=t[u])}}return r}function stringify(r,e){var n=[];e="function"===typeof e?{prepare:e}:e;e=defaults(e||{},{prepare:null,isSerializable:function(r,e){return r.hasOwnProperty(e)}});var t=cloneWithReferences(r,n,e);return JSON.stringify({root:t,references:n})}function cloneWithReferences(r,e,i,a){i.prepare&&i.prepare(r);a=a||[];var f=typeOf(r);if(-1!==n.indexOf(f)){var u=a.indexOf(r);if(-1===u){var s={};u=e.push({contents:s,value:wrapConstructor(r)})-1;a[u]=r;for(var o in r)i.isSerializable(r,o)&&(s[o]=cloneWithReferences(r[o],e,i,a))}return t+u}return wrap(r)}function parse(r,e){var n=JSON.parse(r);e="function"===typeof e?{finalize:e}:e;e=defaults(e||{},{finalize:null});return rebuildFromReferences(n.root,n.references,e)}function rebuildFromReferences(r,e,n,i){i=i||[];if(starts(r,t)){var a=parseInt(r.slice(t.length),10);if(!i.hasOwnProperty(a)){var f=e[a];var u=unwrapConstructor(f.value);var s=f.contents;i[a]=u;for(var o in s)u[o]=rebuildFromReferences(s[o],e,n,i)}n.finalize&&n.finalize(i[a]);return i[a]}n.finalize&&n.finalize(r);return unwrap(r)}function wrap(r){var e=typeOf(r);return"undefined"===e?f:"function"===e?a+r.toString():"date"===e?u+r.getTime():Infinity===r?i:"dom"!==e?r:void 0}function wrapConstructor(r){var e=typeOf(r);return"function"===e||"date"===e?wrap(r):"object"===e?s:"array"===e?o:r}function unwrapConstructor(r){if("string"===typeOf(r)){if(r===f)return;if(starts(r,a))return new Function("return "+r.slice(a.length))();if(starts(r,u)){var e=parseInt(r.slice(u.length),10);return new Date(e)}if(starts(r,s))return{};if(starts(r,o))return[];if(r===i)return Infinity}return r}function unwrap(r){if("string"===typeOf(r)){if(r===f)return;if(starts(r,a)){var e=r.slice(a.length);var n=e.indexOf("(")+1;var t=e.indexOf(")",n);var s=e.slice(n,t);var o=e.indexOf("{")+1;var l=e.lastIndexOf("}")-1;var c=e.slice(o,l);return new Function(s,c)}if(starts(r,u)){var v=parseInt(r.slice(u.length),10);return new Date(v)}if(r===i)return Infinity}return r}function starts(r,e){return"string"===typeOf(r)&&r.slice(0,e.length)===e}function isNumber(r){return!isNaN(parseFloat(r))&&isFinite(r)}var l={stringify:stringify,parse:parse};var c=this||r;e?e=l:c.Cryo=l})();var n=e;export default n;

