import r from"readable-stream";import t from"inherits";import n from"typedarray";import e from"buffer";var i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var o={};var a=e.Buffer;var f=r.Writable;var s=t;if("undefined"===typeof Uint8Array)var u=n.Uint8Array;else var u=Uint8Array;function ConcatStream(r,t){if(!((this||i)instanceof ConcatStream))return new ConcatStream(r,t);if("function"===typeof r){t=r;r={}}r||(r={});var n=r.encoding;var e=false;if(n){n=String(n).toLowerCase();"u8"!==n&&"uint8"!==n||(n="uint8array")}else e=true;f.call(this||i,{objectMode:true});(this||i).encoding=n;(this||i).shouldInferEncoding=e;t&&this.on("finish",(function(){t(this.getBody())}));(this||i).body=[]}o=ConcatStream;s(ConcatStream,f);ConcatStream.prototype._write=function(r,t,n){(this||i).body.push(r);n()};ConcatStream.prototype.inferEncoding=function(r){var t=void 0===r?(this||i).body[0]:r;return a.isBuffer(t)?"buffer":"undefined"!==typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"===typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"};ConcatStream.prototype.getBody=function(){if(!(this||i).encoding&&0===(this||i).body.length)return[];(this||i).shouldInferEncoding&&((this||i).encoding=this.inferEncoding());return"array"===(this||i).encoding?arrayConcat((this||i).body):"string"===(this||i).encoding?stringConcat((this||i).body):"buffer"===(this||i).encoding?bufferConcat((this||i).body):"uint8array"===(this||i).encoding?u8Concat((this||i).body):(this||i).body};var c=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};function isArrayish(r){return/Array\]$/.test(Object.prototype.toString.call(r))}function isBufferish(r){return"string"===typeof r||isArrayish(r)||r&&"function"===typeof r.subarray}function stringConcat(r){var t=[];var n=false;for(var e=0;e<r.length;e++){var i=r[e];"string"===typeof i||a.isBuffer(i)?t.push(i):isBufferish(i)?t.push(new a(i)):t.push(new a(String(i)))}if(a.isBuffer(r[0])){t=a.concat(t);t=t.toString("utf8")}else t=t.join("");return t}function bufferConcat(r){var t=[];for(var n=0;n<r.length;n++){var e=r[n];a.isBuffer(e)?t.push(e):isBufferish(e)?t.push(new a(e)):t.push(new a(String(e)))}return a.concat(t)}function arrayConcat(r){var t=[];for(var n=0;n<r.length;n++)t.push.apply(t,r[n]);return t}function u8Concat(r){var t=0;for(var n=0;n<r.length;n++){"string"===typeof r[n]&&(r[n]=new a(r[n]));t+=r[n].length}var e=new u(t);for(var n=0,i=0;n<r.length;n++){var o=r[n];for(var f=0;f<o.length;f++)e[i++]=o[f]}return e}var y=o;export default y;

