import e from"process";var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var n={};var r=e;(function(e){"function"===typeof bootstrap?bootstrap("promise",e):n=e()})((function(){var e=false;try{throw new Error}catch(t){e=!!t.stack}var n=captureLine();var o;var noop=function(){};var i=function(){var e={task:void 0,next:null};var t=e;var n=false;var o=void 0;var u=false;var c=[];function flush(){var t,r;while(e.next){e=e.next;t=e.task;e.task=void 0;r=e.domain;if(r){e.domain=void 0;r.enter()}runSingle(t,r)}while(c.length){t=c.pop();runSingle(t)}n=false}function runSingle(e,t){try{e()}catch(e){if(u){t&&t.exit();setTimeout(flush,0);t&&t.enter();throw e}setTimeout((function(){throw e}),0)}t&&t.exit()}i=function(e){t=t.next={task:e,domain:u&&r.domain,next:null};if(!n){n=true;o()}};if("object"===typeof r&&"[object process]"===r.toString()&&r.nextTick){u=true;o=function(){r.nextTick(flush)}}else if("function"===typeof r.nextTick)o="undefined"!==typeof window?r.nextTick.bind(window,flush):function(){r.nextTick(flush)};else if("undefined"!==typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=function(){o=requestPortTick;s.port1.onmessage=flush;flush()};var requestPortTick=function(){s.port2.postMessage(0)};o=function(){setTimeout(flush,0);requestPortTick()}}else o=function(){setTimeout(flush,0)};i.runAfter=function(e){c.push(e);if(!n){n=true;o()}};return i}();var u=Function.call;function uncurryThis(e){return function(){return u.apply(e,arguments)}}var c=uncurryThis(Array.prototype.slice);var s=uncurryThis(Array.prototype.reduce||function(e,n){var r=0,o=(this||t).length;if(1===arguments.length)do{if(r in(this||t)){n=(this||t)[r++];break}if(++r>=o)throw new TypeError}while(1);for(;r<o;r++)r in(this||t)&&(n=e(n,(this||t)[r],r));return n});var a=uncurryThis(Array.prototype.indexOf||function(e){for(var n=0;n<(this||t).length;n++)if((this||t)[n]===e)return n;return-1});var f=uncurryThis(Array.prototype.map||function(e,n){var r=this||t;var o=[];s(r,(function(t,i,u){o.push(e.call(n,i,u,r))}),void 0);return o});var p=Object.create||function(e){function Type(){}Type.prototype=e;return new Type};var l=Object.defineProperty||function(e,t,n){e[t]=n.value;return e};var d=uncurryThis(Object.prototype.hasOwnProperty);var h=Object.keys||function(e){var t=[];for(var n in e)d(e,n)&&t.push(n);return t};var v=uncurryThis(Object.prototype.toString);function isObject(e){return e===Object(e)}function isStopIteration(e){return"[object StopIteration]"===v(e)||e instanceof m}var m;m="undefined"!==typeof ReturnValue?ReturnValue:function(e){(this||t).value=e};var y="From previous event:";function makeStackTraceLong(t,n){if(e&&n.stack&&"object"===typeof t&&null!==t&&t.stack){var r=[];for(var o=n;!!o;o=o.source)if(o.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>o.stackCounter)){l(t,"__minimumStackCounter__",{value:o.stackCounter,configurable:true});r.unshift(o.stack)}r.unshift(t.stack);var i=r.join("\n"+y+"\n");var u=filterStackString(i);l(t,"stack",{value:u,configurable:true})}}function filterStackString(e){var t=e.split("\n");var n=[];for(var r=0;r<t.length;++r){var o=t[r];isInternalFrame(o)||isNodeFrame(o)||!o||n.push(o)}return n.join("\n")}function isNodeFrame(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function getFileNameAndLineNumber(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function isInternalFrame(e){var t=getFileNameAndLineNumber(e);if(!t)return false;var r=t[0];var i=t[1];return r===o&&i>=n&&i<=b}function captureLine(){if(e)try{throw new Error}catch(e){var t=e.stack.split("\n");var n=t[0].indexOf("@")>0?t[1]:t[2];var r=getFileNameAndLineNumber(n);if(!r)return;o=r[0];return r[1]}}function deprecate(e,t,n){return function(){"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack);return e.apply(e,arguments)}}function Q(e){return e instanceof Promise?e:isPromiseAlike(e)?coerce(e):fulfill(e)}Q.resolve=Q;Q.nextTick=i;Q.longStackSupport=false;var k=1;"object"===typeof r&&r&&r.env&&r.env.Q_DEBUG&&(Q.longStackSupport=true);Q.defer=defer;function defer(){var t=[],n=[],r;var o=p(defer.prototype);var i=p(Promise.prototype);i.promiseDispatch=function(e,o,i){var u=c(arguments);if(t){t.push(u);"when"===o&&i[1]&&n.push(i[1])}else Q.nextTick((function(){r.promiseDispatch.apply(r,u)}))};i.valueOf=function(){if(t)return i;var e=nearer(r);isPromise(e)&&(r=e);return e};i.inspect=function(){return r?r.inspect():{state:"pending"}};if(Q.longStackSupport&&e)try{throw new Error}catch(e){i.stack=e.stack.substring(e.stack.indexOf("\n")+1);i.stackCounter=k++}function become(o){r=o;Q.longStackSupport&&e&&(i.source=o);s(t,(function(e,t){Q.nextTick((function(){o.promiseDispatch.apply(o,t)}))}),void 0);t=void 0;n=void 0}o.promise=i;o.resolve=function(e){r||become(Q(e))};o.fulfill=function(e){r||become(fulfill(e))};o.reject=function(e){r||become(reject(e))};o.notify=function(e){r||s(n,(function(t,n){Q.nextTick((function(){n(e)}))}),void 0)};return o}defer.prototype.makeNodeResolver=function(){var e=this||t;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(c(arguments,1)):e.resolve(n)}};Q.Promise=promise;Q.promise=promise;function promise(e){if("function"!==typeof e)throw new TypeError("resolver must be a function.");var t=defer();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}promise.race=race;promise.all=all;promise.reject=reject;promise.resolve=Q;Q.passByCopy=function(e){return e};Promise.prototype.passByCopy=function(){return this||t};Q.join=function(e,t){return Q(e).join(t)};Promise.prototype.join=function(e){return Q([this||t,e]).spread((function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)}))};Q.race=race;function race(e){return promise((function(t,n){for(var r=0,o=e.length;r<o;r++)Q(e[r]).then(t,n)}))}Promise.prototype.race=function(){return this.then(Q.race)};Q.makePromise=Promise;function Promise(e,t,n){void 0===t&&(t=function(e){return reject(new Error("Promise does not support operation: "+e))});void 0===n&&(n=function(){return{state:"unknown"}});var r=p(Promise.prototype);r.promiseDispatch=function(n,o,i){var u;try{u=e[o]?e[o].apply(r,i):t.call(r,o,i)}catch(e){u=reject(e)}n&&n(u)};r.inspect=n;if(n){var o=n();"rejected"===o.state&&(r.exception=o.reason);r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}Promise.prototype.toString=function(){return"[object Promise]"};Promise.prototype.then=function(e,n,r){var o=this||t;var i=defer();var u=false;function _fulfilled(t){try{return"function"===typeof e?e(t):t}catch(e){return reject(e)}}function _rejected(e){if("function"===typeof n){makeStackTraceLong(e,o);try{return n(e)}catch(e){return reject(e)}}return reject(e)}function _progressed(e){return"function"===typeof r?r(e):e}Q.nextTick((function(){o.promiseDispatch((function(e){if(!u){u=true;i.resolve(_fulfilled(e))}}),"when",[function(e){if(!u){u=true;i.resolve(_rejected(e))}}])}));o.promiseDispatch(void 0,"when",[void 0,function(e){var t;var n=false;try{t=_progressed(e)}catch(e){n=true;if(!Q.onerror)throw e;Q.onerror(e)}n||i.notify(t)}]);return i.promise};Q.tap=function(e,t){return Q(e).tap(t)};Promise.prototype.tap=function(e){e=Q(e);return this.then((function(t){return e.fcall(t).thenResolve(t)}))};Q.when=when;function when(e,t,n,r){return Q(e).then(t,n,r)}Promise.prototype.thenResolve=function(e){return this.then((function(){return e}))};Q.thenResolve=function(e,t){return Q(e).thenResolve(t)};Promise.prototype.thenReject=function(e){return this.then((function(){throw e}))};Q.thenReject=function(e,t){return Q(e).thenReject(t)};Q.nearer=nearer;function nearer(e){if(isPromise(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}Q.isPromise=isPromise;function isPromise(e){return e instanceof Promise}Q.isPromiseAlike=isPromiseAlike;function isPromiseAlike(e){return isObject(e)&&"function"===typeof e.then}Q.isPending=isPending;function isPending(e){return isPromise(e)&&"pending"===e.inspect().state}Promise.prototype.isPending=function(){return"pending"===this.inspect().state};Q.isFulfilled=isFulfilled;function isFulfilled(e){return!isPromise(e)||"fulfilled"===e.inspect().state}Promise.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state};Q.isRejected=isRejected;function isRejected(e){return isPromise(e)&&"rejected"===e.inspect().state}Promise.prototype.isRejected=function(){return"rejected"===this.inspect().state};var j=[];var P=[];var g=[];var w=true;function resetUnhandledRejections(){j.length=0;P.length=0;w||(w=true)}function trackRejection(e,t){if(w){"object"===typeof r&&"function"===typeof r.emit&&Q.nextTick.runAfter((function(){if(-1!==a(P,e)){r.emit("unhandledRejection",t,e);g.push(e)}}));P.push(e);t&&"undefined"!==typeof t.stack?j.push(t.stack):j.push("(no stack) "+t)}}function untrackRejection(e){if(w){var t=a(P,e);if(-1!==t){"object"===typeof r&&"function"===typeof r.emit&&Q.nextTick.runAfter((function(){var n=a(g,e);if(-1!==n){r.emit("rejectionHandled",j[t],e);g.splice(n,1)}}));P.splice(t,1);j.splice(t,1)}}}Q.resetUnhandledRejections=resetUnhandledRejections;Q.getUnhandledReasons=function(){return j.slice()};Q.stopUnhandledRejectionTracking=function(){resetUnhandledRejections();w=false};resetUnhandledRejections();Q.reject=reject;function reject(e){var n=Promise({when:function(n){n&&untrackRejection(this||t);return n?n(e):this||t}},(function fallback(){return this||t}),(function inspect(){return{state:"rejected",reason:e}}));trackRejection(n,e);return n}Q.fulfill=fulfill;function fulfill(e){return Promise({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return h(e)}},void 0,(function inspect(){return{state:"fulfilled",value:e}}))}function coerce(e){var t=defer();Q.nextTick((function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}));return t.promise}Q.master=master;function master(e){return Promise({isDef:function(){}},(function fallback(t,n){return dispatch(e,t,n)}),(function(){return Q(e).inspect()}))}Q.spread=spread;function spread(e,t,n){return Q(e).spread(t,n)}Promise.prototype.spread=function(e,t){return this.all().then((function(t){return e.apply(void 0,t)}),t)};Q.async=async;function async(e){return function(){function continuer(e,t){var i;if("undefined"===typeof StopIteration){try{i=n[e](t)}catch(e){return reject(e)}return i.done?Q(i.value):when(i.value,r,o)}try{i=n[e](t)}catch(e){return isStopIteration(e)?Q(e.value):reject(e)}return when(i,r,o)}var n=e.apply(this||t,arguments);var r=continuer.bind(continuer,"next");var o=continuer.bind(continuer,"throw");return r()}}Q.spawn=spawn;function spawn(e){Q.done(Q.async(e)())}Q["return"]=_return;function _return(e){throw new m(e)}Q.promised=promised;function promised(e){return function(){return spread([this||t,all(arguments)],(function(t,n){return e.apply(t,n)}))}}Q.dispatch=dispatch;function dispatch(e,t,n){return Q(e).dispatch(t,n)}Promise.prototype.dispatch=function(e,n){var r=this||t;var o=defer();Q.nextTick((function(){r.promiseDispatch(o.resolve,e,n)}));return o.promise};Q.get=function(e,t){return Q(e).dispatch("get",[t])};Promise.prototype.get=function(e){return this.dispatch("get",[e])};Q.set=function(e,t,n){return Q(e).dispatch("set",[t,n])};Promise.prototype.set=function(e,t){return this.dispatch("set",[e,t])};Q.del=Q["delete"]=function(e,t){return Q(e).dispatch("delete",[t])};Promise.prototype.del=Promise.prototype["delete"]=function(e){return this.dispatch("delete",[e])};Q.mapply=Q.post=function(e,t,n){return Q(e).dispatch("post",[t,n])};Promise.prototype.mapply=Promise.prototype.post=function(e,t){return this.dispatch("post",[e,t])};Q.send=Q.mcall=Q.invoke=function(e,t){return Q(e).dispatch("post",[t,c(arguments,2)])};Promise.prototype.send=Promise.prototype.mcall=Promise.prototype.invoke=function(e){return this.dispatch("post",[e,c(arguments,1)])};Q.fapply=function(e,t){return Q(e).dispatch("apply",[void 0,t])};Promise.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])};Q["try"]=Q.fcall=function(e){return Q(e).dispatch("apply",[void 0,c(arguments,1)])};Promise.prototype.fcall=function(){return this.dispatch("apply",[void 0,c(arguments)])};Q.fbind=function(e){var n=Q(e);var r=c(arguments,1);return function fbound(){return n.dispatch("apply",[this||t,r.concat(c(arguments))])}};Promise.prototype.fbind=function(){var e=this||t;var n=c(arguments);return function fbound(){return e.dispatch("apply",[this||t,n.concat(c(arguments))])}};Q.keys=function(e){return Q(e).dispatch("keys",[])};Promise.prototype.keys=function(){return this.dispatch("keys",[])};Q.all=all;function all(e){return when(e,(function(e){var t=0;var n=defer();s(e,(function(r,o,i){var u;if(isPromise(o)&&"fulfilled"===(u=o.inspect()).state)e[i]=u.value;else{++t;when(o,(function(r){e[i]=r;0===--t&&n.resolve(e)}),n.reject,(function(e){n.notify({index:i,value:e})}))}}),void 0);0===t&&n.resolve(e);return n.promise}))}Promise.prototype.all=function(){return all(this||t)};Q.any=any;function any(e){if(0===e.length)return Q.resolve();var t=Q.defer();var n=0;s(e,(function(r,o,i){var u=e[i];n++;when(u,onFulfilled,onRejected,onProgress);function onFulfilled(e){t.resolve(e)}function onRejected(e){n--;if(0===n){var r=e||new Error(""+e);r.message="Q can't get fulfillment value from any promise, all "+"promises were rejected. Last error message: "+r.message;t.reject(r)}}function onProgress(e){t.notify({index:i,value:e})}}),void 0);return t.promise}Promise.prototype.any=function(){return any(this||t)};Q.allResolved=deprecate(allResolved,"allResolved","allSettled");function allResolved(e){return when(e,(function(e){e=f(e,Q);return when(all(f(e,(function(e){return when(e,noop,noop)}))),(function(){return e}))}))}Promise.prototype.allResolved=function(){return allResolved(this||t)};Q.allSettled=allSettled;function allSettled(e){return Q(e).allSettled()}Promise.prototype.allSettled=function(){return this.then((function(e){return all(f(e,(function(e){e=Q(e);function regardless(){return e.inspect()}return e.then(regardless,regardless)})))}))};Q.fail=Q["catch"]=function(e,t){return Q(e).then(void 0,t)};Promise.prototype.fail=Promise.prototype["catch"]=function(e){return this.then(void 0,e)};Q.progress=progress;function progress(e,t){return Q(e).then(void 0,void 0,t)}Promise.prototype.progress=function(e){return this.then(void 0,void 0,e)};Q.fin=Q["finally"]=function(e,t){return Q(e)["finally"](t)};Promise.prototype.fin=Promise.prototype["finally"]=function(e){if(!e||"function"!==typeof e.apply)throw new Error("Q can't apply finally callback");e=Q(e);return this.then((function(t){return e.fcall().then((function(){return t}))}),(function(t){return e.fcall().then((function(){throw t}))}))};Q.done=function(e,t,n,r){return Q(e).done(t,n,r)};Promise.prototype.done=function(e,n,o){var onUnhandledError=function(e){Q.nextTick((function(){makeStackTraceLong(e,i);if(!Q.onerror)throw e;Q.onerror(e)}))};var i=e||n||o?this.then(e,n,o):this||t;"object"===typeof r&&r&&r.domain&&(onUnhandledError=r.domain.bind(onUnhandledError));i.then(void 0,onUnhandledError)};Q.timeout=function(e,t,n){return Q(e).timeout(t,n)};Promise.prototype.timeout=function(e,t){var n=defer();var r=setTimeout((function(){if(!t||"string"===typeof t){t=new Error(t||"Timed out after "+e+" ms");t.code="ETIMEDOUT"}n.reject(t)}),e);this.then((function(e){clearTimeout(r);n.resolve(e)}),(function(e){clearTimeout(r);n.reject(e)}),n.notify);return n.promise};Q.delay=function(e,t){if(void 0===t){t=e;e=void 0}return Q(e).delay(t)};Promise.prototype.delay=function(e){return this.then((function(t){var n=defer();setTimeout((function(){n.resolve(t)}),e);return n.promise}))};Q.nfapply=function(e,t){return Q(e).nfapply(t)};Promise.prototype.nfapply=function(e){var t=defer();var n=c(e);n.push(t.makeNodeResolver());this.fapply(n).fail(t.reject);return t.promise};Q.nfcall=function(e){var t=c(arguments,1);return Q(e).nfapply(t)};Promise.prototype.nfcall=function(){var e=c(arguments);var t=defer();e.push(t.makeNodeResolver());this.fapply(e).fail(t.reject);return t.promise};Q.nfbind=Q.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=c(arguments,1);return function(){var n=t.concat(c(arguments));var r=defer();n.push(r.makeNodeResolver());Q(e).fapply(n).fail(r.reject);return r.promise}};Promise.prototype.nfbind=Promise.prototype.denodeify=function(){var e=c(arguments);e.unshift(this||t);return Q.denodeify.apply(void 0,e)};Q.nbind=function(e,t){var n=c(arguments,2);return function(){var r=n.concat(c(arguments));var o=defer();r.push(o.makeNodeResolver());function bound(){return e.apply(t,arguments)}Q(bound).fapply(r).fail(o.reject);return o.promise}};Promise.prototype.nbind=function(){var e=c(arguments,0);e.unshift(this||t);return Q.nbind.apply(void 0,e)};Q.nmapply=Q.npost=function(e,t,n){return Q(e).npost(t,n)};Promise.prototype.nmapply=Promise.prototype.npost=function(e,t){var n=c(t||[]);var r=defer();n.push(r.makeNodeResolver());this.dispatch("post",[e,n]).fail(r.reject);return r.promise};Q.nsend=Q.nmcall=Q.ninvoke=function(e,t){var n=c(arguments,2);var r=defer();n.push(r.makeNodeResolver());Q(e).dispatch("post",[t,n]).fail(r.reject);return r.promise};Promise.prototype.nsend=Promise.prototype.nmcall=Promise.prototype.ninvoke=function(e){var t=c(arguments,1);var n=defer();t.push(n.makeNodeResolver());this.dispatch("post",[e,t]).fail(n.reject);return n.promise};Q.nodeify=nodeify;function nodeify(e,t){return Q(e).nodeify(t)}Promise.prototype.nodeify=function(e){if(!e)return this||t;this.then((function(t){Q.nextTick((function(){e(null,t)}))}),(function(t){Q.nextTick((function(){e(t)}))}))};Q.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var b=captureLine();return Q}));var o=n;export default o;

