import t from"acorn";import e from"xtend";var r={};var s=t;var a=s.tokTypes;var n=s.isIdentifierStart;r=function(t){return function(t){function anonymous(){t.apply(this,arguments)}t&&(anonymous.__proto__=t);anonymous.prototype=Object.create(t&&t.prototype);anonymous.prototype.constructor=anonymous;anonymous.prototype.parseLiteral=function parseLiteral(e){var r=t.prototype.parseLiteral.call(this,e);110==r.raw.charCodeAt(r.raw.length-1)&&(r.bigint=this.getNumberInput(r.start,r.end));return r};anonymous.prototype.readRadixNumber=function readRadixNumber(t){var e=this.pos;this.pos+=2;var r=this.readInt(t);null===r&&this.raise(this.start+2,"Expected number in radix "+t);if(110==this.input.charCodeAt(this.pos)){var s=this.getNumberInput(e,this.pos);r="undefined"!==typeof BigInt?BigInt(s):null;++this.pos}else n(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(a.num,r)};anonymous.prototype.readNumber=function readNumber(e){var r=this.pos;if(e)return t.prototype.readNumber.call(this,e);if(48===this.input.charCodeAt(r)&&110!==this.input.charCodeAt(r+1))return t.prototype.readNumber.call(this,e);null===this.readInt(10)&&this.raise(r,"Invalid number");if(110!=this.input.charCodeAt(this.pos)){this.pos=r;return t.prototype.readNumber.call(this,e)}var s=this.getNumberInput(r,this.pos);var n="undefined"!==typeof BigInt?BigInt(s):null;++this.pos;return this.finishToken(a.num,n)};anonymous.prototype.getNumberInput=function getNumberInput(e,r){return t.prototype.getNumberInput?t.prototype.getNumberInput.call(this,e,r):this.input.slice(e,r)};return anonymous}(t)};var o=r;var i={};var p=t;if(false)throw new Error("acorn-private-class-elements requires acorn@^6.1.0, not "+p.version);var u=p.tokTypes;var l=p.TokenType;i=function(t){if(t.prototype.parsePrivateName)return t;var e=t;while(e&&e!==p.Parser)e=e.__proto__;if(e!==p.Parser)throw new Error("acorn-private-class-elements does not support mixing different acorn copies");t=function(t){function Parser_(){t.apply(this,arguments)}t&&(Parser_.__proto__=t);Parser_.prototype=Object.create(t&&t.prototype);Parser_.prototype.constructor=Parser_;Parser_.prototype._branch=function _branch(){this.__branch=this.__branch||new t({ecmaVersion:this.options.ecmaVersion},this.input);this.__branch.end=this.end;this.__branch.pos=this.pos;this.__branch.type=this.type;this.__branch.value=this.value;this.__branch.containsEsc=this.containsEsc;return this.__branch};Parser_.prototype.parsePrivateClassElementName=function parsePrivateClassElementName(t){t.computed=false;t.key=this.parsePrivateName();"constructor"==t.key.name&&this.raise(t.key.start,"Classes may not have a private element named constructor");var e={get:"set",set:"get"}[t.kind];var r=this._privateBoundNamesStack[this._privateBoundNamesStack.length-1];Object.prototype.hasOwnProperty.call(r,t.key.name)&&r[t.key.name]!==e&&this.raise(t.start,"Duplicate private element");r[t.key.name]=t.kind||true;delete this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][t.key.name];return t.key};Parser_.prototype.parsePrivateName=function parsePrivateName(){var t=this.startNode();t.name=this.value;this.next();this.finishNode(t,"PrivateName");"never"==this.options.allowReserved&&this.checkUnreserved(t);return t};Parser_.prototype.getTokenFromCode=function getTokenFromCode(e){if(35===e){++this.pos;var r=this.readWord1();return this.finishToken(this.privateNameToken,r)}return t.prototype.getTokenFromCode.call(this,e)};Parser_.prototype.parseClass=function parseClass(e,r){this._privateBoundNamesStack=this._privateBoundNamesStack||[];var s=Object.create(this._privateBoundNamesStack[this._privateBoundNamesStack.length-1]||null);this._privateBoundNamesStack.push(s);this._unresolvedPrivateNamesStack=this._unresolvedPrivateNamesStack||[];var a=Object.create(null);this._unresolvedPrivateNamesStack.push(a);var n=t.prototype.parseClass.call(this,e,r);this._privateBoundNamesStack.pop();this._unresolvedPrivateNamesStack.pop();if(this._unresolvedPrivateNamesStack.length)Object.assign(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1],a);else{var o=Object.keys(a);if(o.length){o.sort((function(t,e){return a[t]-a[e]}));this.raise(a[o[0]],"Usage of undeclared private name")}}return n};Parser_.prototype.parseSubscript=function parseSubscript(e,r,s,a,n){if(!this.eat(u.dot))return t.prototype.parseSubscript.call(this,e,r,s,a,n);var o=this.startNodeAt(r,s);o.object=e;o.computed=false;if(this.type==this.privateNameToken){o.property=this.parsePrivateName();this._privateBoundNamesStack.length&&this._privateBoundNamesStack[this._privateBoundNamesStack.length-1][o.property.name]||(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][o.property.name]=o.property.start)}else o.property=this.parseIdent(true);return this.finishNode(o,"MemberExpression")};Parser_.prototype.parseMaybeUnary=function parseMaybeUnary(e,r){var s=t.prototype.parseMaybeUnary.call(this,e,r);"delete"==s.operator&&"MemberExpression"==s.argument.type&&"PrivateName"==s.argument.property.type&&this.raise(s.start,"Private elements may not be deleted");return s};return Parser_}(t);t.prototype.privateNameToken=new l("privateName");return t};var h=i;var c={};var y=t;var m=y.tokTypes;var d=h;function maybeParseFieldValue(t){if(this.eat(m.eq)){var e=this._inFieldValue;this._inFieldValue=true;t.value=this.parseExpression();this._inFieldValue=e}else t.value=null}c=function(t){t=d(t);return function(t){function anonymous(){t.apply(this,arguments)}t&&(anonymous.__proto__=t);anonymous.prototype=Object.create(t&&t.prototype);anonymous.prototype.constructor=anonymous;anonymous.prototype.parseClassElement=function parseClassElement(e){if(this.options.ecmaVersion>=8&&(this.type==m.name||this.type==this.privateNameToken||this.type==m.bracketL||this.type==m.string)){var r=this._branch();if(r.type==m.bracketL){var s=0;do{r.eat(m.bracketL)?++s:r.eat(m.bracketR)?--s:r.next()}while(s>0)}else r.next();if(r.type==m.eq||r.canInsertSemicolon()||r.type==m.semi){var a=this.startNode();this.type==this.privateNameToken?this.parsePrivateClassElementName(a):this.parsePropertyName(a);("Identifier"===a.key.type&&"constructor"===a.key.name||"Literal"===a.key.type&&"constructor"===a.key.value)&&this.raise(a.key.start,"Classes may not have a field called constructor");maybeParseFieldValue.call(this,a);this.finishNode(a,"FieldDefinition");this.semicolon();return a}}return t.prototype.parseClassElement.apply(this,arguments)};anonymous.prototype.parseIdent=function parseIdent(e,r){var s=t.prototype.parseIdent.call(this,e,r);this._inFieldValue&&"arguments"==s.name&&this.raise(s.start,"A class field initializer may not contain arguments");return s};return anonymous}(t)};var v=c;var f={};var _=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;var k=t;var b=k.tokTypes;function maybeParseFieldValue$1(t){if(this.eat(b.eq)){var e=this._inStaticFieldValue;this._inStaticFieldValue=true;t.value=this.parseExpression();this._inStaticFieldValue=e}else t.value=null}var N=h;f=function(t){var e=N(t);return function(t){function anonymous(){t.apply(this,arguments)}t&&(anonymous.__proto__=t);anonymous.prototype=Object.create(t&&t.prototype);anonymous.prototype.constructor=anonymous;anonymous.prototype.parseClassElement=function parseClassElement(e){var r=this;if(this.eat(b.semi))return null;var s=this.startNode();var tryContextual=function(t,e){"undefined"==typeof e&&(e=false);var a=r.start,n=r.startLoc;if(!r.eatContextual(t))return false;if(r.type!==b.parenL&&(!e||!r.canInsertSemicolon()))return true;s.key&&r.unexpected();s.computed=false;s.key=r.startNodeAt(a,n);s.key.name=t;r.finishNode(s.key,"Identifier");return false};s.static=tryContextual("static");if(!s.static)return t.prototype.parseClassElement.apply(this,arguments);var a=this.eat(b.star);var n=false;if(!a)if(this.options.ecmaVersion>=8&&this.isContextual("async")){_.lastIndex=this.pos;var o=_.exec(this.input);var i=this.input.charAt(this.pos+o[0].length);if(";"===i||"="===i){s.key=this.parseIdent(true);s.computed=false;maybeParseFieldValue$1.call(this,s);this.finishNode(s,"FieldDefinition");this.semicolon();return s}if(this.options.ecmaVersion>=8&&tryContextual("async",true)){n=true;a=this.options.ecmaVersion>=9&&this.eat(b.star)}}else tryContextual("get")?s.kind="get":tryContextual("set")&&(s.kind="set");if(this.type===this.privateNameToken){this.parsePrivateClassElementName(s);if(this.type!==b.parenL){"prototype"===s.key.name&&this.raise(s.key.start,"Classes may not have a private static property named prototype");maybeParseFieldValue$1.call(this,s);this.finishNode(s,"FieldDefinition");this.semicolon();return s}}else if(!s.key){this.parsePropertyName(s);"prototype"!==(s.key.name||s.key.value)||s.computed||this.raise(s.key.start,"Classes may not have a static property named prototype")}s.kind||(s.kind="method");this.parseClassMethod(s,a,n);s.kind||"constructor"!==(s.key.name||s.key.value)||s.computed||this.raise(s.key.start,"Classes may not have a static field named constructor");"get"===s.kind&&0!==s.value.params.length&&this.raiseRecoverable(s.value.start,"getter should have no params");"set"===s.kind&&1!==s.value.params.length&&this.raiseRecoverable(s.value.start,"setter should have exactly one param");"set"===s.kind&&"RestElement"===s.value.params[0].type&&this.raiseRecoverable(s.value.params[0].start,"Setter cannot use rest params");return s};anonymous.prototype.parseClassMethod=function parseClassMethod(e,r,s,a){if(r||s||"method"!=e.kind||!e.static||this.options.ecmaVersion<8||this.type==b.parenL)return t.prototype.parseClassMethod.apply(this,arguments);maybeParseFieldValue$1.call(this,e);delete e.kind;e=this.finishNode(e,"FieldDefinition");this.semicolon();return e};anonymous.prototype.parseIdent=function parseIdent(e,r){var s=t.prototype.parseIdent.call(this,e,r);this._inStaticFieldValue&&"arguments"==s.name&&this.raise(s.start,"A static class field initializer may not contain arguments");return s};return anonymous}(e)};var g=f;var x={};x=function(t){return function(t){function anonymous(){t.apply(this,arguments)}t&&(anonymous.__proto__=t);anonymous.prototype=Object.create(t&&t.prototype);anonymous.prototype.constructor=anonymous;anonymous.prototype.readInt=function readInt(e,r){if(null!=r)return t.prototype.readInt.call(this,e,r);var s=this.pos,a=0,n=false;for(;;){var o=this.input.charCodeAt(this.pos),i=void 0;if(o>=97)i=o-97+10;else{if(95==o){n||this.raise(this.pos,"Invalid numeric separator");++this.pos;n=false;continue}i=o>=65?o-65+10:o>=48&&o<=57?o-48:Infinity}if(i>=e)break;++this.pos;a=a*e+i;n=true}if(this.pos===s)return null;n||this.raise(this.pos-1,"Invalid numeric separator");return a};anonymous.prototype.readNumber=function readNumber(e){var r=t.prototype.readNumber.call(this,e);var s=this.end-this.start>=2&&48===this.input.charCodeAt(this.start);var a=this.getNumberInput(this.start,this.end);if(a.length<this.end-this.start){s&&this.raise(this.start,"Invalid number");this.value=parseFloat(a)}return r};anonymous.prototype.getNumberInput=function getNumberInput(t,e){return this.input.slice(t,e).replace(/_/g,"")};return anonymous}(t)};var P=x;var I={};Object.defineProperty(I,"__esModule",{value:true});I.DynamicImportKey=void 0;var E=function(){function defineProperties(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||false;s.configurable=true;"value"in s&&(s.writable=true);Object.defineProperty(t,s.key,s)}}return function(t,e,r){e&&defineProperties(t.prototype,e);r&&defineProperties(t,r);return t}}();var C=function(){function get(t,e,r){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:get(a,e,r)}if("value"in s)return s.value;var n=s.get;return void 0!==n?n.call(r):void 0}return get}();I["default"]=dynamicImport;var S=t;function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function _inherits(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var O=I.DynamicImportKey="Import";S.tokTypes._import.startsExpr=true;function parseDynamicImport(){var t=this.startNode();this.next();this.type!==S.tokTypes.parenL&&this.unexpected();return this.finishNode(t,O)}function parenAfter(){return/^(\s|\/\/.*|\/\*[^]*?\*\/)*\(/.test(this.input.slice(this.pos))}function dynamicImport(t){return function(t){_inherits(_class,t);function _class(){_classCallCheck(this,_class);return _possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}E(_class,[{key:"parseStatement",value:function(){function parseStatement(t,e,r){return this.type===S.tokTypes._import&&parenAfter.call(this)?this.parseExpressionStatement(this.startNode(),this.parseExpression()):C(_class.prototype.__proto__||Object.getPrototypeOf(_class.prototype),"parseStatement",this).call(this,t,e,r)}return parseStatement}()},{key:"parseExprAtom",value:function(){function parseExprAtom(t){return this.type===S.tokTypes._import?parseDynamicImport.call(this):C(_class.prototype.__proto__||Object.getPrototypeOf(_class.prototype),"parseExprAtom",this).call(this,t)}return parseExprAtom}()}]);return _class}(t)}var T={};var A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;var w=t.tokTypes;T=function(t){return function(t){function anonymous(){t.apply(this,arguments)}t&&(anonymous.__proto__=t);anonymous.prototype=Object.create(t&&t.prototype);anonymous.prototype.constructor=anonymous;anonymous.prototype.parseExport=function parseExport(e,r){A.lastIndex=this.pos;var s=A.exec(this.input);var a=this.input.charAt(this.pos+s[0].length);if("*"!==a)return t.prototype.parseExport.call(this,e,r);this.next();var n=this.startNode();this.expect(w.star);if(this.eatContextual("as")){e.declaration=null;n.exported=this.parseIdent(true);this.checkExport(r,n.exported.name,this.lastTokStart);e.specifiers=[this.finishNode(n,"ExportNamespaceSpecifier")]}this.expectContextual("from");this.type!==w.string&&this.unexpected();e.source=this.parseExprAtom();this.semicolon();return this.finishNode(e,e.specifiers?"ExportNamedDeclaration":"ExportAllDeclaration")};return anonymous}(t)};var j=T;var F={};var V=t.tokTypes;var B=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;var nextTokenIsDot=function(t){B.lastIndex=t.pos;var e=B.exec(t.input);var r=t.pos+e[0].length;return"."===t.input.slice(r,r+1)};F=function(t){return function(t){function anonymous(){t.apply(this,arguments)}t&&(anonymous.__proto__=t);anonymous.prototype=Object.create(t&&t.prototype);anonymous.prototype.constructor=anonymous;anonymous.prototype.parseExprAtom=function parseExprAtom(e){if(this.type!==V._import||!nextTokenIsDot(this))return t.prototype.parseExprAtom.call(this,e);this.options.allowImportExportEverywhere||this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'");var r=this.startNode();r.meta=this.parseIdent(true);this.expect(V.dot);r.property=this.parseIdent(true);"meta"!==r.property.name&&this.raiseRecoverable(r.property.start,"The only valid meta property for import is import.meta");return this.finishNode(r,"MetaProperty")};anonymous.prototype.parseStatement=function parseStatement(e,r,s){if(this.type!==V._import||!nextTokenIsDot(this))return t.prototype.parseStatement.call(this,e,r,s);var a=this.startNode();var n=this.parseExpression();return this.parseExpressionStatement(a,n)};return anonymous}(t)};var R=F;var D={};var L=t;var M=e;var z=L.Parser.extend(o).extend(v).extend(g).extend(P).extend(I.default);var U=z.extend(j).extend(R);function mapOptions(t){t||(t={});return M({ecmaVersion:2020,allowHashBang:true,allowReturnOutsideFunction:true},t)}function getParser(t){t||(t={});return"module"===t.sourceType?U:z}D=D=M(L,{parse:function parse(t,e){return getParser(e).parse(t,mapOptions(e))},parseExpressionAt:function parseExpressionAt(t,e,r){return getParser(r).parseExpressionAt(t,e,mapOptions(r))},tokenizer:function tokenizer(t,e){return getParser(e).tokenizer(t,mapOptions(e))}});var q=D;export default q;

