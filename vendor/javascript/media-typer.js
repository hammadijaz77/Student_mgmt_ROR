var r={};var e=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g;var t=/^[\u0020-\u007e\u0080-\u00ff]+$/;var a=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/;var n=/\\([\u0000-\u007f])/g;var o=/([\\"])/g;var i=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/;var s=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/;var f=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;r.format=format;r.parse=parse;function format(r){if(!r||"object"!==typeof r)throw new TypeError("argument obj is required");var e=r.parameters;var t=r.subtype;var n=r.suffix;var o=r.type;if(!o||!s.test(o))throw new TypeError("invalid type");if(!t||!i.test(t))throw new TypeError("invalid subtype");var f=o+"/"+t;if(n){if(!s.test(n))throw new TypeError("invalid suffix");f+="+"+n}if(e&&"object"===typeof e){var p;var u=Object.keys(e).sort();for(var v=0;v<u.length;v++){p=u[v];if(!a.test(p))throw new TypeError("invalid parameter name");f+="; "+p+"="+qstring(e[p])}}return f}function parse(r){if(!r)throw new TypeError("argument string is required");"object"===typeof r&&(r=getcontenttype(r));if("string"!==typeof r)throw new TypeError("argument string is required to be a string");var t=r.indexOf(";");var a=-1!==t?r.substr(0,t):r;var o;var i;var s=splitType(a);var f={};var p;e.lastIndex=t;while(i=e.exec(r)){if(i.index!==t)throw new TypeError("invalid parameter format");t+=i[0].length;o=i[1].toLowerCase();p=i[2];'"'===p[0]&&(p=p.substr(1,p.length-2).replace(n,"$1"));f[o]=p}if(-1!==t&&t!==r.length)throw new TypeError("invalid parameter format");s.parameters=f;return s}function getcontenttype(r){return"function"===typeof r.getHeader?r.getHeader("content-type"):"object"===typeof r.headers?r.headers&&r.headers["content-type"]:void 0}function qstring(r){var e=String(r);if(a.test(e))return e;if(e.length>0&&!t.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(o,"\\$1")+'"'}function splitType(r){var e=f.exec(r.toLowerCase());if(!e)throw new TypeError("invalid media type");var t=e[1];var a=e[2];var n;var o=a.lastIndexOf("+");if(-1!==o){n=a.substr(o+1);a=a.substr(0,o)}var i={type:t,subtype:a,suffix:n};return i}const p=r.format,u=r.parse;export default r;export{p as format,u as parse};

